<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>Manajemen Pengguna</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/datatables.net-bs5@1.13.8/css/dataTables.bootstrap5.min.css"
        rel="stylesheet">

    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
        }

        .btn-utama {
            background: #cdcec9;
            border: none;
            color: #333;
        }

        .btn-utama:hover {
            background: #bfb9b4;
            color: #333;
        }

        table.dataTable thead th {
            background: #cdcec9;
            color: #333;
        }

        .aksi-btn {
            width: 36px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            background: #fff;
        }

        .aksi-btn i {
            font-size: 16px;
        }

        .btn-edit {
            border: 1px solid #f1c40f;
            color: #f1c40f;
        }

        .btn-password {
            border: 1px solid #3498db;
            color: #3498db;
        }

        .btn-nonaktif {
            border: 1px solid #e74c3c;
            color: #e74c3c;
        }

        .btn-aktif {
            border: 1px solid #27ae60;
            color: #27ae60;
        }

        .modal-form .modal-content {
            border-radius: 12px;
        }

        .modal-form label {
            font-weight: 600;
        }

        .modal-hapus .modal-content {
            border-radius: 12px;
            text-align: center;
            padding: 25px;
        }

        .modal-hapus .icon-box {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid #e74c3c;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px auto;
            color: #e74c3c;
            font-size: 32px;
        }

        .btn-tidak {
            border: 1px solid #aaa;
            background: #fff;
            color: #555;
            border-radius: 6px;
            padding: 6px 22px;
        }

        .btn-iya {
            border: 1px solid #e74c3c;
            background: #fff;
            color: #e74c3c;
            border-radius: 6px;
            padding: 6px 22px;
        }

        .btn-iya:hover {
            background: #e74c3c;
            color: #fff;
        }
    </style>
</head>

<body>

    <div id="layout-admin"></div>

    <div id="isi-halaman" style="display:none">

        <div class="d-flex justify-content-end mb-3">
            <button class="btn btn-utama" data-bs-toggle="modal" data-bs-target="#modalTambah">Tambah Pengguna</button>
        </div>

        <table id="tabel-user" class="table table-striped align-middle w-100">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Nama</th>
                    <th>Role</th>
                    <th>Status</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                <tr data-status="aktif">
                    <td>admin01</td>
                    <td>Michael Nathanael</td>
                    <td>Admin</td>
                    <td><span class="badge bg-success">Aktif</span></td>
                    <td>
                        <button class="aksi-btn btn-edit" data-bs-toggle="modal" data-bs-target="#modalUbah">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="aksi-btn btn-password" data-bs-toggle="modal" data-bs-target="#modalPassword">
                            <i class="bi bi-key"></i>
                        </button>
                        <button class="aksi-btn btn-nonaktif btn-status" data-bs-toggle="modal"
                            data-bs-target="#modalStatus">
                            <i class="bi bi-person-x"></i>
                        </button>
                    </td>
                </tr>

                <tr data-status="nonaktif">
                    <td>manager02</td>
                    <td>Andi Project</td>
                    <td>Manager Proyek</td>
                    <td><span class="badge bg-secondary">Non-Aktif</span></td>
                    <td>
                        <button class="aksi-btn btn-edit" data-bs-toggle="modal" data-bs-target="#modalUbah">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="aksi-btn btn-password" data-bs-toggle="modal" data-bs-target="#modalPassword">
                            <i class="bi bi-key"></i>
                        </button>
                        <button class="aksi-btn btn-aktif btn-status" data-bs-toggle="modal"
                            data-bs-target="#modalStatus">
                            <i class="bi bi-person-check"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>


    <div class="modal fade modal-form" id="modalTambah" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content p-3">
                <div class="modal-header">
                    <h5 class="modal-title">Tambah Pengguna</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <label>Username</label>
                    <input class="form-control mb-3">
                    <label>Password</label>
                    <input type="password" class="form-control mb-3">
                    <label>Nama</label>
                    <input class="form-control mb-3">
                    <label>Role</label>
                    <select class="form-control mb-3">
                        <option>Admin</option>
                        <option>Manager Proyek</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-utama" data-bs-dismiss="modal">Simpan</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade modal-form" id="modalUbah" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content p-3">
                <div class="modal-header">
                    <h5 class="modal-title">Ubah Pengguna</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <label>Username</label>
                    <input class="form-control mb-3" value="admin01">
                    <label>Nama</label>
                    <input class="form-control mb-3" value="Zelvin Admin">
                    <label>Role</label>
                    <select class="form-control mb-3">
                        <option selected>Admin</option>
                        <option>Manager Proyek</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-utama" data-bs-dismiss="modal">Simpan</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade modal-form" id="modalPassword" tabindex="-1">
        <div class="modal-dialog modal-md modal-dialog-centered">
            <div class="modal-content p-3">
                <div class="modal-header">
                    <h5 class="modal-title">Ubah Kata Sandi</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <label>Password Baru</label>
                    <input type="password" class="form-control mb-3">
                    <label>Konfirmasi Password</label>
                    <input type="password" class="form-control">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-utama" data-bs-dismiss="modal">Simpan</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade modal-hapus" id="modalStatus" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="icon-box" id="iconStatus">
                    <i class="bi bi-person-x"></i>
                </div>
                <h5 id="teksStatus"></h5>
                <div class="mt-4 d-flex justify-content-center gap-3">
                    <button class="btn-tidak" data-bs-dismiss="modal">Tidak</button>
                    <button class="btn-iya" data-bs-dismiss="modal">Ya</button>
                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/datatables.net@1.13.8/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/datatables.net-bs5@1.13.8/js/dataTables.bootstrap5.min.js"></script>

    <script>
        fetch("../component/sidebar_admin.html")
            .then(r => r.text())
            .then(html => {
                document.getElementById("layout-admin").innerHTML = html;
                document.getElementById("page-title").innerText = "Manajemen Pengguna";
                document.getElementById("konten-halaman").innerHTML = document.getElementById("isi-halaman").innerHTML;

                const sidebar = document.getElementById("sidebar");
                const toggle = document.getElementById("toggleSidebar");

                function checkScreen() {
                    if (window.innerWidth < 500) sidebar.classList.add("closed");
                }

                toggle.addEventListener("click", () => sidebar.classList.toggle("closed"));
                window.addEventListener("resize", checkScreen);
                checkScreen();

                new DataTable('#tabel-user', { pageLength: 10 });

                document.querySelectorAll(".btn-status").forEach(btn => {
                    btn.addEventListener("click", function () {
                        const row = this.closest("tr");
                        const status = row.getAttribute("data-status");
                        const teks = document.getElementById("teksStatus");
                        const icon = document.getElementById("iconStatus");

                        if (status === "aktif") {
                            teks.innerHTML = "Nonaktifkan penggunna ini?";
                            icon.innerHTML = '<i class="bi bi-person-x"></i>';
                            icon.style.borderColor = "#e74c3c";
                            icon.style.color = "#e74c3c";
                        } else {
                            teks.innerHTML = "Aktifkan kembali pengguna ini?";
                            icon.innerHTML = '<i class="bi bi-person-check"></i>';
                            icon.style.borderColor = "#27ae60";
                            icon.style.color = "#27ae60";
                        }
                    });
                });
            });
    </script>

</body>

</html>